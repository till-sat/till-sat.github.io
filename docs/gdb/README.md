# GDB

## 0 Manual
### Started
* [软件调试的艺术](./%E8%BD%AF%E4%BB%B6%E8%B0%83%E8%AF%95%E7%9A%84%E8%89%BA%E6%9C%AF.pdf)

### Advanced
* [Debugging with GDB The GNU Source-Level Debugger](./Debugging%20with%20GDB%20The%20GNU%20Source-Level%20Debugger.pdf)

## 1 Shell
### 1.1 Debug program
``` shell
$ gdbtui xxx
```
or
``` shell
$ gdb xxx
(gdb) layout src
```

### 1.2 Terminal operation
* See [../terminal/README.md](../terminal/README.md)

### 1.3 Preventing display confusion
1. query current terminal's output
``` shell
$ tty
/dev/pts/X
``` 
2. redirect terminal to output
``` shell
(gdb) tty /dev/pts/Y
```

## 2 Pause mechanism
| Mechanism     | Pause                                                           |
| ------------- | --------------------------------------------------------------- |
| breakpoint    | pause execution                                                 |
| watchpoint    | pause execution when a particular memory location changes value |
|               | print Old value and New value                                   |
| catchpoint    | pause execution when a particular event occurs                  |


## 3 Command
### 3.1 Running
| Command       | Explanation               |
| ------------- | ------------------------- |
| r / run       | run program from start    |
| c / continue  | continue program from now |
| start         | start from main and stop  |
| n / next      | goto next line of program |
| s / step      | step into a function      |
| f / finish    | jump out a function       |

### 3.2 Arguments
| Command        | Explanation               |
| -------------- | ------------------------- |
| set args xxx   | set args then run         |
| run args xxx   | run with args             |
| start args xxx | start with args           |

### 3.3 Breakpoint
| Command       | Explanation                       |
| ------------- | --------------------------------- |
| b / break     | set a breakpoint                  |
| tb / tbreak   | set a breakpoint only effect once |
| w / watch     | set a watchpoint                  |

### 3.4 Point operation
| Command              | Explanation                 |
| -------------------- | --------------------------- |
| i / info breakpoints | query information of points |
| d / delete           | delete a / all points       |
| disable              | disable points              |
| enable               | enable points               |

### 3.5 Print operation
| Command              | Explanation                                         |
| -------------------- | --------------------------------------------------- |
| p / print            | e.g. p /x print - hex format                        |
|                      | e.g. p *(struct point) - print struct               |
| disp / display       | dispaly each time hit a breakpoint                  |
| call                 | call function in the source code                    |
|                      | **e.g. every struct nice to hava a print function** |

### 3.6 File core
| Command             | Explanation                            |
| ------------------- | -------------------------------------- |
| file core           | dump particular core file              |
| ulimit -c unlimited | allow a core file of any sizes         |
| gdb XXX core        | use GDB to examine the core file       |
|                     | XXX was generated by 'XXX'             |
| bt / backstrace     | print a backstarce of the entire stack |